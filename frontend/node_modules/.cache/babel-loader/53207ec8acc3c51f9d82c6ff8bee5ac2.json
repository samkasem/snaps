{"ast":null,"code":"import _slicedToArray from\"D:/Projects/snaps/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import{AiOutlineLogout}from'react-icons/ai';import{useParams,useNavigate}from'react-router-dom';import{GoogleLogout}from'react-google-login';import{userCreatedSnapsQuery,userQuery,userSavedSnapsQuery}from'../utils/data';import{fetchUser}from'../utils/fetchUser';import{client}from'../client';import MasonryLayout from'./MasonryLayout';import Spinner from'./Spinner';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var activeBtnStyles='bg-yellow-500 text-white font-bold p-2 rounded-full w-20 outline-none';var notActiveBtnStyles='bg-primary mr-4 text-black font-bold p-2 rounded-full w-20 outline-none';var UserProfile=function UserProfile(){var _useState=useState(),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),snaps=_useState4[0],setSnaps=_useState4[1];var _useState5=useState('Created'),_useState6=_slicedToArray(_useState5,2),text=_useState6[0],setText=_useState6[1];var _useState7=useState('created'),_useState8=_slicedToArray(_useState7,2),activeBtn=_useState8[0],setActiveBtn=_useState8[1];var navigate=useNavigate();var _useParams=useParams(),userId=_useParams.userId;var User=fetchUser();useEffect(function(){var query=userQuery(userId);client.fetch(query).then(function(data){setUser(data[0]);});},[userId]);useEffect(function(){if(text==='Created'){var createdSnapsQuery=userCreatedSnapsQuery(userId);client.fetch(createdSnapsQuery).then(function(data){setSnaps(data);});}else{var savedSnapsQuery=userSavedSnapsQuery(userId);client.fetch(savedSnapsQuery).then(function(data){setSnaps(data);});}},[text,userId]);var logout=function logout(){localStorage.clear();navigate('/login');};if(!user)return/*#__PURE__*/_jsx(Spinner,{message:\"Loading profile\"});return/*#__PURE__*/_jsx(\"div\",{className:\"relative pb-2 h-full justify-center items-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col pb-5\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"relative flex flex-col mb-7\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col justify-center items-center\",children:[/*#__PURE__*/_jsx(\"img\",{className:\" w-full h-370 2xl:h-510 shadow-lg object-cover\",src:\"https://source.unsplash.com/1600x900/?nature,photography,technology\",alt:\"user-pic\"}),/*#__PURE__*/_jsx(\"img\",{className:\"rounded-full w-20 h-20 -mt-10 shadow-xl object-cover\",src:user.image,alt:\"user-pic\"})]}),/*#__PURE__*/_jsx(\"h1\",{className:\"font-bold text-3xl text-center mt-3\",children:user.userName}),/*#__PURE__*/_jsx(\"div\",{className:\"absolute top-0 z-1 right-0 p-2\",children:userId===User.googleId&&/*#__PURE__*/_jsx(GoogleLogout,{clientId:\"\".concat(process.env.REACT_APP_GOOGLE_API_TOKEN),render:function render(renderProps){return/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\" bg-white p-2 rounded-full cursor-pointer outline-none shadow-md\",onClick:renderProps.onClick,disabled:renderProps.disabled,children:/*#__PURE__*/_jsx(AiOutlineLogout,{color:\"red\",fontSize:21})});},onLogoutSuccess:logout,cookiePolicy:\"single_host_origin\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center mb-7\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:function onClick(e){setText(e.target.textContent);setActiveBtn('created');},className:\"\".concat(activeBtn==='created'?activeBtnStyles:notActiveBtnStyles),children:\"Created\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:function onClick(e){setText(e.target.textContent);setActiveBtn('saved');},className:\"\".concat(activeBtn==='saved'?activeBtnStyles:notActiveBtnStyles),children:\"Saved\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"px-2\",children:/*#__PURE__*/_jsx(MasonryLayout,{snaps:snaps})}),(snaps===null||snaps===void 0?void 0:snaps.length)===0&&/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center font-bold items-center w-full text-1xl mt-2\",children:\"No Snaps Found!\"})]})});};export default UserProfile;","map":{"version":3,"names":["React","useEffect","useState","AiOutlineLogout","useParams","useNavigate","GoogleLogout","userCreatedSnapsQuery","userQuery","userSavedSnapsQuery","fetchUser","client","MasonryLayout","Spinner","activeBtnStyles","notActiveBtnStyles","UserProfile","user","setUser","snaps","setSnaps","text","setText","activeBtn","setActiveBtn","navigate","userId","User","query","fetch","then","data","createdSnapsQuery","savedSnapsQuery","logout","localStorage","clear","image","userName","googleId","process","env","REACT_APP_GOOGLE_API_TOKEN","renderProps","onClick","disabled","e","target","textContent","length"],"sources":["D:/Projects/snaps/frontend/src/components/UserProfile.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react'\r\nimport { AiOutlineLogout } from 'react-icons/ai'\r\nimport { useParams, useNavigate } from 'react-router-dom'\r\nimport { GoogleLogout } from 'react-google-login'\r\n\r\nimport {\r\n  userCreatedSnapsQuery,\r\n  userQuery,\r\n  userSavedSnapsQuery,\r\n} from '../utils/data'\r\nimport { fetchUser } from '../utils/fetchUser'\r\nimport { client } from '../client'\r\nimport MasonryLayout from './MasonryLayout'\r\nimport Spinner from './Spinner'\r\n\r\nconst activeBtnStyles =\r\n  'bg-yellow-500 text-white font-bold p-2 rounded-full w-20 outline-none'\r\nconst notActiveBtnStyles =\r\n  'bg-primary mr-4 text-black font-bold p-2 rounded-full w-20 outline-none'\r\n\r\nconst UserProfile = () => {\r\n  const [user, setUser] = useState()\r\n  const [snaps, setSnaps] = useState()\r\n  const [text, setText] = useState('Created')\r\n  const [activeBtn, setActiveBtn] = useState('created')\r\n  const navigate = useNavigate()\r\n  const { userId } = useParams()\r\n\r\n  const User = fetchUser()\r\n\r\n  useEffect(() => {\r\n    const query = userQuery(userId)\r\n    client.fetch(query).then((data) => {\r\n      setUser(data[0])\r\n    })\r\n  }, [userId])\r\n\r\n  useEffect(() => {\r\n    if (text === 'Created') {\r\n      const createdSnapsQuery = userCreatedSnapsQuery(userId)\r\n\r\n      client.fetch(createdSnapsQuery).then((data) => {\r\n        setSnaps(data)\r\n      })\r\n    } else {\r\n      const savedSnapsQuery = userSavedSnapsQuery(userId)\r\n\r\n      client.fetch(savedSnapsQuery).then((data) => {\r\n        setSnaps(data)\r\n      })\r\n    }\r\n  }, [text, userId])\r\n\r\n  const logout = () => {\r\n    localStorage.clear()\r\n\r\n    navigate('/login')\r\n  }\r\n\r\n  if (!user) return <Spinner message='Loading profile' />\r\n\r\n  return (\r\n    <div className='relative pb-2 h-full justify-center items-center'>\r\n      <div className='flex flex-col pb-5'>\r\n        <div className='relative flex flex-col mb-7'>\r\n          <div className='flex flex-col justify-center items-center'>\r\n            <img\r\n              className=' w-full h-370 2xl:h-510 shadow-lg object-cover'\r\n              src='https://source.unsplash.com/1600x900/?nature,photography,technology'\r\n              alt='user-pic'\r\n            />\r\n            <img\r\n              className='rounded-full w-20 h-20 -mt-10 shadow-xl object-cover'\r\n              src={user.image}\r\n              alt='user-pic'\r\n            />\r\n          </div>\r\n          <h1 className='font-bold text-3xl text-center mt-3'>\r\n            {user.userName}\r\n          </h1>\r\n          <div className='absolute top-0 z-1 right-0 p-2'>\r\n            {userId === User.googleId && (\r\n              <GoogleLogout\r\n                clientId={`${process.env.REACT_APP_GOOGLE_API_TOKEN}`}\r\n                render={(renderProps) => (\r\n                  <button\r\n                    type='button'\r\n                    className=' bg-white p-2 rounded-full cursor-pointer outline-none shadow-md'\r\n                    onClick={renderProps.onClick}\r\n                    disabled={renderProps.disabled}\r\n                  >\r\n                    <AiOutlineLogout color='red' fontSize={21} />\r\n                  </button>\r\n                )}\r\n                onLogoutSuccess={logout}\r\n                cookiePolicy='single_host_origin'\r\n              />\r\n            )}\r\n          </div>\r\n        </div>\r\n        <div className='text-center mb-7'>\r\n          <button\r\n            type='button'\r\n            onClick={(e) => {\r\n              setText(e.target.textContent)\r\n              setActiveBtn('created')\r\n            }}\r\n            className={`${\r\n              activeBtn === 'created' ? activeBtnStyles : notActiveBtnStyles\r\n            }`}\r\n          >\r\n            Created\r\n          </button>\r\n          <button\r\n            type='button'\r\n            onClick={(e) => {\r\n              setText(e.target.textContent)\r\n              setActiveBtn('saved')\r\n            }}\r\n            className={`${\r\n              activeBtn === 'saved' ? activeBtnStyles : notActiveBtnStyles\r\n            }`}\r\n          >\r\n            Saved\r\n          </button>\r\n        </div>\r\n\r\n        <div className='px-2'>\r\n          <MasonryLayout snaps={snaps} />\r\n        </div>\r\n\r\n        {snaps?.length === 0 && (\r\n          <div className='flex justify-center font-bold items-center w-full text-1xl mt-2'>\r\n            No Snaps Found!\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default UserProfile\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}